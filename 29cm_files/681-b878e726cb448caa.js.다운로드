(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[681],{1480:function(e,t,r){"use strict";r.d(t,{ZP:function(){return q},OB:function(){return f},uD:function(){return y}});var n,a,i,s,u,o,c,l=r(1752),d=r.n(l),h=r(3454);let{publicRuntimeConfig:p={}}=null!==(n=d()())&&void 0!==n?n:{},y=null!==(i=null!==(a=p.APP_ENV)&&void 0!==a?a:"production")&&void 0!==i?i:"development";null!==(o=null!==(u=null!==(s=p.TAGS)&&void 0!==s?s:h.env.NEXT_PUBLIC_TAG)&&void 0!==u?u:h.env.TAGS)&&void 0!==o||h.env.revision;let g={development:{development:!0,production:!1,parentDomain:"https://dev-order.29cm.co.kr",domain:"https://dev-customer-service.29cm.co.kr",auth:"https://dev-auth.29cm.co.kr/",emailLink:"https://ndev.29cm.co.kr/mypage/edit/reconfirm",customerServicePhone:"1660-2929",vvipCustomerServicePhone:"1660-2900",api:{base:"https://dev-customer-service-api.29cm.co.kr/api/v1",order:"https://apihub.29cm.co.kr/dev/",product:"https://dev-commerce-api.29cm.co.kr/api/v4",user:"https://dev-user-api.29cm.co.kr"}},qa:{development:!0,production:!1,parentDomain:"https://qa-order.29cm.co.kr",domain:"https://qa-customer-service.29cm.co.kr",auth:"https://qa-auth.29cm.co.kr/",emailLink:"https://nqa.29cm.co.kr/mypage/edit/reconfirm",customerServicePhone:"1660-2929",vvipCustomerServicePhone:"1660-2900",api:{base:"https://qa-customer-service-api.29cm.co.kr/api/v1",order:"https://apihub.29cm.co.kr/qa/",product:"https://qa-commerce-api.29cm.co.kr/api/v4",user:"https://qa-user-api.29cm.co.kr"}},production:{development:!1,production:!0,parentDomain:"https://order.29cm.co.kr",domain:"https://customer-service.29cm.co.kr",auth:"https://auth.29cm.co.kr/",emailLink:"https://www.29cm.co.kr/mypage/edit/reconfirm",customerServicePhone:"1660-2929",vvipCustomerServicePhone:"1660-2900",api:{base:"https://customer-service-api.29cm.co.kr/api/v1",order:"https://apihub.29cm.co.kr/",product:"https://commerce-api.29cm.co.kr/api/v4",user:"https://user-api.29cm.co.kr"}}},m=null!==(c=g[y])&&void 0!==c?c:g.development,f=m;var q=m},6916:function(e,t,r){"use strict";r.d(t,{v:function(){return n}});let n={FAQ:"/faq",INQUIRY:"/inquiry",INQUIRY_FAQ:"/inquiry/faq",INQUIRY_CATEGORY:"/inquiry/category",INQUIRY_DETAIL:"/inquiry-detail",INQUIRY_CREATE:"/inquiry/create",INQUIRY_ORDER:"/inquiry/order",INQUIRY_HISTORY:"/inquiry/history"}},4128:function(e,t,r){"use strict";var n=r(1163),a=r(7294);t.Z=()=>{let e=(0,n.useRouter)(),[t,r]=(0,a.useState)(!1),i=()=>{r(!1)};return(0,a.useEffect)(()=>(e.events.on("routeChangeComplete",i),()=>{e.events.off("routeChangeComplete",i)}),[e,r]),{safePush:(e,n)=>{let{isReplace:a,isFaqPage:i,isHistoryTab:s=!1}=n;if(t)return;r(!0);let[u]=e,o="";if("object"==typeof u){let{pathname:e,query:t}=u,r=t?"?"+new URLSearchParams(t).toString():"";o="".concat(e).concat(r)}else o=u;let c=o;if(window.location!=window.parent.location){let e="/my-order/cscenter/qna/qna-mantoman-list";i&&(e="/my-order/cscenter/faq"),o=encodeURIComponent(o),c="".concat(document.referrer).concat(e,"?target=").concat(o).concat(s?"&qna_main=history":"")}a?parent.location.replace(c):parent.location.href=c}}}},1988:function(e,t,r){"use strict";r.d(t,{gj:function(){return ei},db:function(){return Q},om:function(){return z},aY:function(){return en},aq:function(){return B},M_:function(){return V},bI:function(){return ea},mq:function(){return $},jj:function(){return X},T$:function(){return j},Qf:function(){return J},tU:function(){return ee},hp:function(){return er},Kj:function(){return W},eA:function(){return G},bM:function(){return es},Nk:function(){return K},jE:function(){return O},Jl:function(){return x},kq:function(){return eu},iD:function(){return L},Pv:function(){return Y},i5:function(){return eo},Xy:function(){return M},nz:function(){return _},Wo:function(){return H},Yh:function(){return Z}});var n=r(8551),a=r(8029),i=r(9726),s=r(1480),u=r(1556),o=r(7066),c=r(129),l=r.n(c);class d extends Error{constructor(e){super(e.message),this.name="APIError",this.code=e.code,this.status=e.status,this.data=e.data}}class h{async getAccessToken(e){let t=await (0,u.uf)(e);if(!t)return null;this.accessToken=t.accessToken}constructor(){this.accessToken=""}}let p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(e).replace(/^\/+|\/+$/g,"")},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(e).replace(/^\/+/g,"").replace(/\/+$/g,"/")};class g extends h{static shared(){return this.$instance||(this.$instance=new this),this.$instance}setAccessToken(e){this.accessToken=e}setBaseUrl(e){this.baseUrl=p(e)}setWithCredentials(e){this.withCredentials=e}useBaseApi(){this.setBaseUrl(s.ZP.api.base)}useUserApi(){this.setBaseUrl(s.ZP.api.user)}showAlert(e){(0,u.sk)()||alert(e)}async request(e,t,r,n){var a;let i={...this.headers,...null!==(a=null==n?void 0:n.headers)&&void 0!==a?a:{}},{withCredentials:u=this.withCredentials,...c}=null!=n?n:{},h=null;try{h=this.accessToken?this.accessToken:await this.getAccessToken()}catch(e){"EXPIRED_TOKEN"===e.message?(this.showAlert("토큰이 만료되었습니다.\n로그인 페이지로 이동합니다."),parent.location.replace("/login?redirect_uri=".concat(location.href))):this.showAlert(e.message)}h&&(i.Authorization="Bearer ".concat(h));let p={withCredentials:u,...null!=c?c:{},method:e,headers:i,url:"".concat(this.baseUrl,"/").concat(y(t)),paramsSerializer:e=>l().stringify(e,{arrayFormat:"repeat"})};return["POST","PUT","DELETE","PATCH"].includes(e)?p.data=r:p.params=r,(0,o.Z)(p).then(e=>({status:e.status,data:e.data})).catch(t=>{if(t.response){var r;let{status:n}=t.response,a=null!==(r=t.request.path)&&void 0!==r?r:"",i="".concat(e.toUpperCase()," ").concat(a," [").concat(n,"]"),u=new d({status:n,message:"".concat(i),code:t.code,data:t.response.data});throw 401===n&&(this.showAlert("로그인 페이지로 이동합니다."),location.href="".concat(s.ZP.auth,"/login?redirect_uri=").concat(location.href)),u}throw t})}get(e,t,r){return this.request("GET",e,t,r)}post(e,t,r){return this.request("POST",e,t,r)}upload(e,t,r){return this.request("POST",e,t,{...null!=r?r:{},headers:{"Content-Type":"multipart/form-data"}})}put(e,t,r){return this.request("PUT",e,t,r)}delete(e,t){return this.request("DELETE",e,t)}patch(e,t,r){return this.request("PATCH",e,t,r)}constructor(e){super(),this.headers={"Content-Type":"application/json"},this.withCredentials=!0,this.baseUrl=p(e),this.accessToken=(0,u.AX)()}}class m extends g{getPublishedCategories(){return this.get("/faq/categories/filter").then(e=>e.data)}getPublishedCategoriesByScreen(e,t){return this.get("/faq/categories/list?screenId=".concat(e),t).then(e=>e.data)}getCategory(e){return this.get("/faq/categories/".concat(e)).then(e=>e.data)}getPublishedSubCategories(e){return this.get("/faq/categories/".concat(e,"/sub-categories")).then(e=>e.data)}constructor(){super(),this.useBaseApi()}}let f=m.shared();class q extends g{getPublishedFaqs(e,t){return this.get("/faq/contents/".concat(e,"/faqs"),t).then(e=>e.data)}getPublishedFaq(e){return this.get("/faq/contents/".concat(e)).then(e=>e.data)}searchFaqs(e){return this.get("/faq/contents/search",e).then(e=>e.data)}increaseViewCount(e){return this.put("/faq/contents/".concat(e,"/increase-view-count")).then(e=>e.data)}constructor(){super(),this.useBaseApi()}}let v=q.shared();class b extends g{createFeedback(e){return this.post("/faq/feedbacks/create",e).then(e=>e.data)}updateFeedback(e,t){return this.put("/faq/feedbacks/".concat(e,"/update"),void 0,{params:t}).then(e=>e.data)}constructor(){super(),this.useBaseApi()}}let P=b.shared();class I extends g{getInquiryType(){return this.get("/inquiry/type/all?isPublished=true").then(e=>e.data)}getInquiryHistory(e){return this.get("/inquiry/content/list",e).then(e=>e.data)}createInquiry(e){return this.post("/inquiry/content/create",e).then(e=>e.data)}getInquiryTypeDetails(e){return this.get("/inquiry/type/".concat(e)).then(e=>e.data)}getInquiryDetail(e){return this.get("/inquiry/content/".concat(e)).then(e=>e.data)}createSubInquiry(e){return this.post("/inquiry/content/create-sub-inquiry",e).then(e=>e.data)}getInquiryFeedbackListReason(){return this.get("/inquiry/feedbacks/list-reason").then(e=>e.data)}createFeedbackInquiry(e){return this.post("/inquiry/feedbacks/create",e).then(e=>e.data)}constructor(){super(),this.useBaseApi()}}let k=I.shared();class F extends g{uploadFiles(e){return this.upload("inquiry/content/upload-inquiry-attachment",e).then(e=>e.data)}constructor(){super(),this.useBaseApi()}}let T=F.shared();class C extends g{getListProducts(e){return this.get("/orders/my-order-item/",e).then(e=>e.data)}constructor(){super(),this.setBaseUrl(s.OB.api.product)}}let w=C.shared();class N extends g{getOrdersItem(e){if(e)return this.get("/order/item-manage/".concat(e,"/")).then(e=>e.data)}getListOrders(e){return this.get("/order/orders/my-order/",e).then(e=>e.data)}getProduct(e){return this.get("/item/detail/".concat(e,"/")).then(e=>e.data)}getOrders(e){return this.get("/order/orders/my-order/",e).then(e=>e.data)}constructor(){super(),this.setBaseUrl(s.ZP.api.order)}}let A=N.shared();var S=r(7294),U=r(2271);let E={INQUIRY:{HISTORY:"inquiry-history",HISTORY_INFINITE:"inquiry-history-infinite"}};class R extends g{getUserLevel(){return this.get("/api/v4/user-level").then(e=>e.data)}constructor(){super(),this.useUserApi()}}let D=R.shared(),_=e=>(0,n.a)({queryKey:["public-faqs-search",e],queryFn:()=>v.searchFaqs(e),enabled:!!e.searchQuery}),K=()=>(0,n.a)({queryKey:["public-categories"],queryFn:()=>f.getPublishedCategories()}),O=(e,t)=>(0,n.a)({queryKey:["public-categories",e,t],queryFn:()=>f.getPublishedCategoriesByScreen(e,t),enabled:!!e}),B=e=>(0,n.a)({queryKey:["public-category-id",e],queryFn:()=>f.getCategory(e)}),Y=e=>(0,n.a)({queryKey:["public-sub-categories",e],queryFn:()=>f.getPublishedSubCategories(e),enabled:!!e}),L=(e,t)=>(0,n.a)({queryKey:["public-faqs",Number(e),t],queryFn:()=>v.getPublishedFaqs(Number(e),t)}),x=(e,t)=>(0,n.a)({queryKey:["public-faq",e],queryFn:()=>v.getPublishedFaq(e),enabled:!!e||t}),Q=()=>(0,a.D)({mutationFn:e=>P.createFeedback(e)}),H=()=>(0,a.D)({mutationFn:e=>{let{id:t,...r}=e;return P.updateFeedback(t,r)}}),M=()=>(0,a.D)({mutationFn:e=>v.increaseViewCount(e)}),z=e=>(0,a.D)({mutationFn:e=>k.createInquiry(e),onError:t=>{null==e||e.show({description:t.message})}}),Z=()=>(0,a.D)({mutationFn:async e=>await T.uploadFiles(e)}),j=()=>(0,n.a)({queryKey:["inquiry-type"],queryFn:()=>k.getInquiryType()}),$=(e,t)=>(0,n.a)({queryKey:[E.INQUIRY.HISTORY,e],queryFn:()=>k.getInquiryHistory(e),placeholderData:e=>e,enabled:t}),G=e=>(0,n.a)({queryKey:["get-product-by-id",e],queryFn:()=>A.getOrdersItem(e),retry:!1}),X=(e,t)=>{let{isFetching:r,hasNextPage:n,data:a,fetchNextPage:s,isError:u,isSuccess:o}=(0,i.N)({queryKey:[E.INQUIRY.HISTORY_INFINITE],queryFn:e=>{let{pageParam:t}=e;return k.getInquiryHistory(t)},initialPageParam:e,getNextPageParam:t=>{if(!(0,U.h$)(t.data.currentPage,t.data.totalPages))return{...e,size:8,page:t.data.currentPage+1}},enabled:t}),{items:c,totalCount:l}=(0,S.useMemo)(()=>{var e,t;let r=et(null==a?void 0:a.pages);return{items:(null!==(e=null==a?void 0:a.pages)&&void 0!==e?e:[]).flatMap(e=>{var t;return null!==(t=e.data.lst.map(e=>({...e,redirectId:e.id,subInquiryContents:e.subInquiryContents.map(t=>({...t,redirectId:e.id,title:"".concat(t.title)}))})))&&void 0!==t?t:[]}),totalCount:null!==(t=null==r?void 0:r.data.totalItems)&&void 0!==t?t:0}},[a]);return{data:c,totalCount:l,isFetching:r,hasNextPage:n,isError:u,isSuccess:o,fetchNextPage:s}},V=e=>(0,n.a)({queryKey:["inquiry-detail",e],queryFn:()=>k.getInquiryDetail(e),enabled:!!e}),W=e=>(0,n.a)({queryKey:["get-product",e],queryFn:()=>A.getProduct(e),enabled:!1,retry:!1}),J=e=>(0,n.a)({queryKey:["get-list-products",e],queryFn:()=>w.getListProducts(e),retry:!1}),ee=e=>{let t={limit:5,offset:5*(e-1)};return(0,n.a)({queryKey:["get-order-list",e],queryFn:()=>A.getOrders(t),placeholderData:e=>e})};function et(e){if(null!=e&&0!==e.length)return e[0]}let er=()=>{let e={limit:5,offset:0},{isFetching:t,hasNextPage:r,data:n,fetchNextPage:a}=(0,i.N)({queryKey:["get-order-list-infinite"],queryFn:e=>{let{pageParam:t}=e;return A.getOrders(t)},initialPageParam:e,getNextPageParam:(t,r)=>{if(!(t.results.length<5))return{...e,offset:5*r.length}}}),{items:s,totalCount:u}=(0,S.useMemo)(()=>{var e,t;let r=et(null==n?void 0:n.pages);return{items:(null!==(e=null==n?void 0:n.pages)&&void 0!==e?e:[]).flatMap(e=>{var t;return null!==(t=e.results)&&void 0!==t?t:[]}),totalCount:null!==(t=null==r?void 0:r.count)&&void 0!==t?t:0}},[n]);return{data:s,totalCount:u,isFetching:t,hasNextPage:r,fetchNextPage:a}},en=e=>(0,a.D)({mutationFn:e=>k.createSubInquiry(e),onSuccess:()=>{null==e||e.show({description:"Submit inquiry successfully!"})},onError:t=>{null==e||e.show({description:t.message})}}),ea=()=>(0,n.a)({queryKey:["feedback-list-reason"],queryFn:()=>k.getInquiryFeedbackListReason()}),ei=e=>(0,a.D)({mutationFn:e=>k.createFeedbackInquiry(e),onSuccess:()=>{null==e||e.show({description:"Submit inquiry successfully!"})},onError:t=>{null==e||e.show({description:t.message})}}),es=()=>{let[e,t]=(0,S.useState)(!0),{isFetching:r,hasNextPage:n,data:a,fetchNextPage:s}=(0,i.N)({queryKey:["get-product-list-infinite"],queryFn:e=>{let{pageParam:t}=e;return w.getListProducts(t)},initialPageParam:{size:10,page:1},getNextPageParam:(e,t)=>{var r;let n=(null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.totalCount)||0,a=(null==t?void 0:t.length)||1;if(!(n<10)&&!(n-10*a<=0))return{size:10,page:a+1}}}),{items:u,totalCount:o}=(0,S.useMemo)(()=>{var t,r,n;let i=et(null==a?void 0:a.pages),s=(null!==(r=null==a?void 0:a.pages)&&void 0!==r?r:[]).flatMap(e=>{var t,r;return null!==(r=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.resultList)&&void 0!==r?r:[]});return{items:e?s.slice(0,3):s,totalCount:null!==(n=null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.totalCount)&&void 0!==n?n:0}},[a,e]);return{data:u,totalCount:o,isFetching:r,hasNextPage:n,fetchNextPage:function(){if(e){t(!1);return}s()}}},eu=(e,t)=>{let r={page:0,size:10},{isFetching:n,hasNextPage:a,data:s,fetchNextPage:u}=(0,i.N)({queryKey:["get-order-list-infinite"+Number(e),t],queryFn:t=>{let{pageParam:n}=t;return v.getPublishedFaqs(Number(e),null!=n?n:r)},initialPageParam:r,getNextPageParam:e=>{if(e.data.currentPage!==e.data.totalPages-1)return{...t,size:10,page:e.data.currentPage+1}}}),{items:o}=(0,S.useMemo)(()=>{var e;return{items:(null!==(e=null==s?void 0:s.pages)&&void 0!==e?e:[]).flatMap(e=>{var t;return null!==(t=e.data.lst.map(e=>({...e})))&&void 0!==t?t:[]})}},[s]);return{data:o,isFetching:n,hasNextPage:a,fetchNextPage:u}},eo=()=>(0,n.a)({queryKey:["get-user-level"],queryFn:()=>D.getUserLevel()})},2129:function(e,t,r){"use strict";r.d(t,{O:function(){return a}});var n=r(8764).Buffer;let a=e=>e?n.from(e,"base64").toString("utf-8"):null},1556:function(e,t,r){"use strict";function n(){return!1}r.d(t,{Wf:function(){return g},RA:function(){return u},AX:function(){return h},sk:function(){return n},uf:function(){return y}}),r(9704);var a=r(2286),i=r(1955),s=r(1480);let u=()=>{switch(s.uD){case"qa":return"qa";case"development":return"dev";default:return}};var o=r(2129);let c=u()?"_".concat(u()):"",l=()=>"_fatc".concat(c),d=()=>"_funuc".concat(c),h=()=>{var e;return null!==(e=i.Z.get(l()))&&void 0!==e?e:""},p=(e,t)=>(0,a.parseCookies)(t)[e],y=async e=>({accessToken:p(l(),e)}),g=e=>{let t=p(d(),e);return(0,o.O)(t)}},4654:function(){}}]);